<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Subdivision Development Proforma</title>
<style>
  body {
    font-family: Arial, sans-serif; 
    margin: 20px;
  }
  table {
    border-collapse: collapse; 
    width: 100%; 
    margin-bottom: 30px;
  }
  table, th, td {
    border: 1px solid #ccc; 
    padding: 8px; 
    text-align: left;
    vertical-align: top;
  }
  th {
    background: #f0f0f0;
    text-align: left;
  }
  input, select {
    width: 100%;
  }
  .section-title {
    margin-top: 40px;
    font-size: 1.2em;
    font-weight: bold;
  }
  .subtotal, .total {
    font-weight: bold;
  }
  .notes {
    color: #555;
    font-size: 0.9em;
  }
  .table-header {
    background: #ddd;
    font-weight: bold;
  }
</style>
<script>
function formatNumber(num) {
  return num.toLocaleString('en-US', {maximumFractionDigits:0});
}

function recalculate() {
  // Inputs
  const acres = parseFloat(document.getElementById('inputAcres').value) || 0;
  const costPerAcre = parseFloat(document.getElementById('costPerAcre').value) || 0;
  const usablePercent = parseFloat(document.getElementById('selectUsable').value) || 0;
  const lotsPerAcre = parseFloat(document.getElementById('inputLotsPerAcre').value) || 0;
  const entitledLotPrice = parseFloat(document.getElementById('entitledLotPrice').value) || 0;
  const developedLotPrice = parseFloat(document.getElementById('developedLotPrice').value) || 0;
  const tapFee = parseFloat(document.getElementById('tapFee').value) || 0;
  const difficulty = document.getElementById('gradingDifficulty').value;
  const primeRate = parseFloat(document.getElementById('primeRate').value) || 0;
  const carryingMonths = parseFloat(document.getElementById('carryingMonths').value) || 12;

  // Calculate total lots
  const totalLots = acres * usablePercent * lotsPerAcre;
  document.getElementById('totalLots').textContent = formatNumber(totalLots);

  // Land & Entitlement Costs
  const landPurchaseTotal = costPerAcre * acres;
  const engineering = 25000;
  const surveying = 20000;
  const adminLegal = 30000;
  const environmental = 5000;
  const geoTests = 5000;
  const landEntitlementSubtotal = landPurchaseTotal + engineering + surveying + adminLegal + environmental + geoTests;
  
  document.getElementById('landPurchaseCost').textContent = formatNumber(landPurchaseTotal);
  document.getElementById('landEntitlementSubtotal').textContent = formatNumber(landEntitlementSubtotal);

  // Site Preparation: Clearing & Grading and Erosion Control
  // Approx midpoints for grading (per acre):
  // Easy: ~13,000/acre
  // Normal: ~27,500/acre
  // Hilly: ~55,000/acre
  let gradingCostPerAcre = 0;
  if (difficulty === 'easy') {
    gradingCostPerAcre = 13000;
  } else if (difficulty === 'normal') {
    gradingCostPerAcre = 27500;
  } else {
    gradingCostPerAcre = 55000;
  }
  const clearingGrading = gradingCostPerAcre * acres;

  // Erosion Control & Soil Stabilization midpoints (per acre):
  // Easy: ~4,000/acre
  // Normal: ~5,000/acre
  // Hilly: ~9,500/acre
  let erosionCostPerAcre = 0;
  if (difficulty === 'easy') {
    erosionCostPerAcre = 4000;
  } else if (difficulty === 'normal') {
    erosionCostPerAcre = 5000;
  } else {
    erosionCostPerAcre = 9500;
  }
  const erosionControl = erosionCostPerAcre * acres;

  // Tap fees (per lot)
  const tapFeesTotal = tapFee * totalLots;

  const sitePrepSubtotal = clearingGrading + erosionControl + tapFeesTotal;
  document.getElementById('sitePrepSubtotal').textContent = formatNumber(sitePrepSubtotal);

  // Roadway & Infrastructure (same as before)
  const roadConstruction = 300 * 5280;
  const lightingSignage = 50000;
  const waterSewer = 5000 * totalLots;
  const stormwater = 2000 * totalLots;
  const electricGas = 2000 * totalLots;
  const roadInfraSubtotal = roadConstruction + lightingSignage + waterSewer + stormwater + electricGas;
  document.getElementById('roadInfraSubtotal').textContent = formatNumber(roadInfraSubtotal);

  // Lot Improvements
  // Landscaping: leftover acres = acres*(1 - usablePercent), $7,000 per leftover acre
  const leftoverAcres = acres * (1 - usablePercent);
  const landscaping = leftoverAcres * 7000;

  const serviceLaterals = 1000 * totalLots;
  const lotGradingFinish = 500 * totalLots;
  const commonAmenities = 50000;
  const lotImprovementsSubtotal = serviceLaterals + lotGradingFinish + commonAmenities + landscaping;
  document.getElementById('lotImprovementsSubtotal').textContent = formatNumber(lotImprovementsSubtotal);

  // Soft Costs (No PM fee here)
  const addlEng = 25000;
  const accountingLegal = 10000;
  const insurance = 5000;
  const marketing = 15000;
  const softCostsBase = addlEng + accountingLegal + insurance + marketing;
  document.getElementById('softCostsSubtotal').textContent = formatNumber(softCostsBase);

  // Hard Costs
  const hardCosts = landEntitlementSubtotal + sitePrepSubtotal + roadInfraSubtotal + lotImprovementsSubtotal;

  // Contingency & Reserves (10% of hard costs + 50,000 reserve)
  const contingency = hardCosts * 0.10;
  const ownerReserve = 50000;
  const contingencySubtotal = contingency + ownerReserve;
  document.getElementById('contingencySubtotal').textContent = formatNumber(contingencySubtotal);

  // Base cost without PM or financing
  const baseCostNoPM = hardCosts + softCostsBase + contingencySubtotal;

  // ENTITLED SCENARIO
  const entitledBasis = totalLots * entitledLotPrice;
  const entitledCosts = landEntitlementSubtotal; 
  const entitledProfit = entitledBasis - entitledCosts;

  // DEVELOPED SCENARIO
  const developedBasis = totalLots * developedLotPrice;
  // Project Management = 5% of developedBasis
  const projectMgmt = developedBasis * 0.05;

  // Financing = (baseCostNoPM + PM) * ( (primeRate+2%) * (carryingMonths/12) )
  const totalRate = (primeRate + 2) / 100.0;
  const financingSubtotal = (baseCostNoPM + projectMgmt) * totalRate * (carryingMonths / 12);
  document.getElementById('financingSubtotal').textContent = formatNumber(financingSubtotal);

  // Developed Costs
  const developedCosts = baseCostNoPM + projectMgmt + financingSubtotal;
  const developedProfit = developedBasis - developedCosts;

  document.getElementById('totalProjectCost').textContent = formatNumber(developedCosts);

  const perLotCost = totalLots > 0 ? developedCosts / totalLots : 0;
  document.getElementById('perLotCost').textContent = formatNumber(perLotCost);

  // Update Profit Calculations Table
  document.getElementById('entitledBasis').textContent = formatNumber(entitledBasis);
  document.getElementById('entitledCosts').textContent = formatNumber(entitledCosts);
  document.getElementById('entitledProfit').textContent = formatNumber(entitledProfit);

  document.getElementById('developedBasis').textContent = formatNumber(developedBasis);
  document.getElementById('developedCosts').textContent = formatNumber(developedCosts);
  document.getElementById('developedProfit').textContent = formatNumber(developedProfit);
}
</script>
</head>
<body onload="recalculate()">

<h1>Subdivision Development Proforma</h1>

<div class="section-title">Inputs</div>
<table>
  <tr>
    <th>Description</th>
    <th>Value</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td>Number of Acres</td>
    <td><input type="number" id="inputAcres" value="100" step="1" oninput="recalculate()" /></td>
    <td class="notes">Enter total acreage</td>
  </tr>
  <tr>
    <td>Cost per Acre</td>
    <td><input type="number" id="costPerAcre" value="7000" step="1" oninput="recalculate()" /></td>
    <td class="notes">Cost of land per acre</td>
  </tr>
  <tr>
    <td>% Usable Acreage</td>
    <td>
      <select id="selectUsable" onchange="recalculate()">
        <option value="0.50">50%</option>
        <option value="0.60">60%</option>
        <option value="0.70">70%</option>
        <option value="0.80">80%</option>
        <option value="0.90">90%</option>
        <option value="1.00" selected>100%</option>
      </select>
    </td>
    <td class="notes">Select usable percentage of total acres</td>
  </tr>
  <tr>
    <td>Lots per Acre</td>
    <td><input type="number" id="inputLotsPerAcre" value="4" step="0.1" oninput="recalculate()" /></td>
    <td class="notes">Assumed density (lots per acre)</td>
  </tr>
  <tr>
    <td>Land Grading Difficulty</td>
    <td>
      <select id="gradingDifficulty" onchange="recalculate()">
        <option value="easy" selected>Easy</option>
        <option value="normal">Normal</option>
        <option value="hilly">Hilly</option>
      </select>
    </td>
    <td class="notes">Affects grading & erosion costs</td>
  </tr>
  <tr>
    <td>Entitled Lot Price to Builder</td>
    <td><input type="number" id="entitledLotPrice" value="8000" step="100" oninput="recalculate()" /></td>
    <td class="notes">Builder's price per entitled lot</td>
  </tr>
  <tr>
    <td>Developed Lot Price to Builder</td>
    <td><input type="number" id="developedLotPrice" value="35000" step="500" oninput="recalculate()" /></td>
    <td class="notes">Builder's price per developed lot</td>
  </tr>
  <tr>
    <td>Sewer & Water Tap Fee (per lot)</td>
    <td><input type="number" id="tapFee" value="2000" step="100" oninput="recalculate()" /></td>
    <td class="notes">Added to site prep costs</td>
  </tr>
  <tr>
    <td>Prime Rate (%)</td>
    <td><input type="number" id="primeRate" value="5" step="0.1" oninput="recalculate()" /></td>
    <td class="notes">Prime interest rate for financing</td>
  </tr>
  <tr>
    <td>Carrying Period (months)</td>
    <td>
      <select id="carryingMonths" onchange="recalculate()">
        <option value="12" selected>12</option>
        <option value="18">18</option>
        <option value="24">24</option>
      </select>
    </td>
    <td class="notes">Project duration affects financing</td>
  </tr>
  <tr>
    <td>Total Lots</td>
    <td><span id="totalLots"></span></td>
    <td class="notes">= Acres * %Usable * Lots/Acre</td>
  </tr>
</table>

<div class="section-title">Land & Entitlement Costs</div>
<table>
  <tr>
    <th>Description</th>
    <th>Cost</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td>Land Purchase</td>
    <td><span id="landPurchaseCost"></span></td>
    <td class="notes">= Acres * Cost/Acre</td>
  </tr>
  <tr>
    <td>Engineering</td>
    <td>25,000</td>
    <td class="notes">Fixed engineering fee</td>
  </tr>
  <tr>
    <td>Surveying</td>
    <td>20,000</td>
    <td class="notes">Fixed surveying cost</td>
  </tr>
  <tr>
    <td>Admin & Legal</td>
    <td>30,000</td>
    <td class="notes">Permits, zoning, legal work</td>
  </tr>
  <tr>
    <td>Environmental Studies</td>
    <td>5,000</td>
    <td class="notes">Wetland delineations, etc.</td>
  </tr>
  <tr>
    <td>Soil/Geotech Tests</td>
    <td>5,000</td>
    <td class="notes">Soil bearing capacity tests</td>
  </tr>
  <tr class="subtotal">
    <td>Subtotal Land & Entitlement</td>
    <td><span id="landEntitlementSubtotal"></span></td>
    <td class="notes">Sum of above costs</td>
  </tr>
</table>

<div class="section-title">Site Preparation</div>
<table>
  <tr>
    <th>Description</th>
    <th>Cost</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td>Clearing & Grading</td>
    <td>Included in subtotal</td>
    <td class="notes">Cost/acre based on difficulty (~$13k/easy, $27.5k/normal, $55k/hilly)</td>
  </tr>
  <tr>
    <td>Erosion Control & Stabilization</td>
    <td>Included in subtotal</td>
    <td class="notes">Cost/acre varies by difficulty (~$4k/easy, $5k/normal, $9.5k/hilly)</td>
  </tr>
  <tr>
    <td>Sewer & Water Tap Fees</td>
    <td>Included in subtotal</td>
    <td class="notes">Tap Fee * Total Lots</td>
  </tr>
  <tr class="subtotal">
    <td>Subtotal Site Prep</td>
    <td><span id="sitePrepSubtotal"></span></td>
    <td class="notes">Sum(Clearing+Erosion+TapFees)</td>
  </tr>
</table>

<div class="section-title">Roadway & Infrastructure</div>
<table>
  <tr>
    <th>Description</th>
    <th>Cost</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td>Road Construction</td>
    <td>Calculated in subtotal</td>
    <td class="notes">300/ft * 5280 ft</td>
  </tr>
  <tr>
    <td>Street Lighting/Signage</td>
    <td>50,000</td>
    <td class="notes">Fixed cost</td>
  </tr>
  <tr>
    <td>Water & Sewer Mains</td>
    <td>Included in subtotal</td>
    <td class="notes">5,000 * lots</td>
  </tr>
  <tr>
    <td>Stormwater Management</td>
    <td>Included in subtotal</td>
    <td class="notes">2,000 * lots</td>
  </tr>
  <tr>
    <td>Electric/Gas/Telecom</td>
    <td>Included in subtotal</td>
    <td class="notes">2,000 * lots</td>
  </tr>
  <tr class="subtotal">
    <td>Subtotal Road & Infra</td>
    <td><span id="roadInfraSubtotal"></span></td>
    <td class="notes">Sum of above infra costs</td>
  </tr>
</table>

<div class="section-title">Lot Improvements</div>
<table>
  <tr>
    <th>Description</th>
    <th>Cost</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td>Service Laterals</td>
    <td>Included in subtotal</td>
    <td class="notes">1,000 * lots</td>
  </tr>
  <tr>
    <td>Lot Grading/Finishing</td>
    <td>Included in subtotal</td>
    <td class="notes">500 * lots</td>
  </tr>
  <tr>
    <td>Common Amenities</td>
    <td>50,000</td>
    <td class="notes">Fixed lump sum</td>
  </tr>
  <tr>
    <td>Landscaping</td>
    <td>Included in subtotal</td>
    <td class="notes">7,000 * leftover acres</td>
  </tr>
  <tr class="subtotal">
    <td>Subtotal Lot Improvements</td>
    <td><span id="lotImprovementsSubtotal"></span></td>
    <td class="notes">Sum of above</td>
  </tr>
</table>

<div class="section-title">Soft Costs (No PM fee here)</div>
<table>
  <tr>
    <th>Description</th>
    <th>Cost</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td>Add’l Engineering/Consulting</td>
    <td>25,000</td>
    <td class="notes">Fixed fee</td>
  </tr>
  <tr>
    <td>Accounting/Legal Fees</td>
    <td>10,000</td>
    <td class="notes">Fixed fee</td>
  </tr>
  <tr>
    <td>Insurance</td>
    <td>5,000</td>
    <td class="notes">Builder’s risk insurance</td>
  </tr>
  <tr>
    <td>Marketing/Sales</td>
    <td>15,000</td>
    <td class="notes">Fixed marketing cost</td>
  </tr>
  <tr class="subtotal">
    <td>Subtotal Soft Costs</td>
    <td><span id="softCostsSubtotal"></span></td>
    <td class="notes">Sum of above soft costs</td>
  </tr>
</table>

<div class="section-title">Contingency & Reserves</div>
<table>
  <tr>
    <th>Description</th>
    <th>Cost</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td>Contingency (10% Hard Costs)</td>
    <td>Included in subtotal</td>
    <td class="notes">10% of Hard Costs</td>
  </tr>
  <tr>
    <td>Owner Reserve</td>
    <td>Included in subtotal</td>
    <td class="notes">Fixed 50,000</td>
  </tr>
  <tr class="subtotal">
    <td>Subtotal Contingency</td>
    <td><span id="contingencySubtotal"></span></td>
    <td class="notes">Contingency + Owner Reserve</td>
  </tr>
</table>

<div class="section-title">Financing Costs (Developed Scenario)</div>
<table>
  <tr>
    <th>Description</th>
    <th>Cost</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td>Financing</td>
    <td><span id="financingSubtotal"></span></td>
    <td class="notes">(BaseCost+PM)*(Prime+2%)*(Months/12)</td>
  </tr>
</table>

<div class="section-title">Totals (Developed Scenario)</div>
<table>
  <tr>
    <th>Description</th>
    <th>Cost</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td>Total Project Cost</td>
    <td><span id="totalProjectCost"></span></td>
    <td class="notes">All costs + PM + financing</td>
  </tr>
  <tr>
    <td>Per-Lot Cost</td>
    <td><span id="perLotCost"></span></td>
    <td class="notes">Total / Total Lots</td>
  </tr>
</table>

<div class="section-title">Profit Calculations</div>
<p class="notes">Showing Basis (Revenue), Costs, and Profit for Entitled and Developed Scenarios</p>

<table>
  <tr>
    <th>Scenario</th>
    <th>Basis</th>
    <th>Costs</th>
    <th>Profit</th>
  </tr>
  <tr>
    <td>Sell Entitled Land</td>
    <td><span id="entitledBasis"></span></td>
    <td><span id="entitledCosts"></span></td>
    <td><span id="entitledProfit"></span></td>
  </tr>
  <tr>
    <td>Sell Fully Developed Lots</td>
    <td><span id="developedBasis"></span></td>
    <td><span id="developedCosts"></span></td>
    <td><span id="developedProfit"></span></td>
  </tr>
</table>

<p class="notes">Adjust values, formulas, and references as needed. This is a simplified approximation.</p>

</body>
</html>
