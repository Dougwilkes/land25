<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Subdivision Development Proforma</title>
<style>
  body {
    font-family: Arial, sans-serif; 
    margin: 20px;
  }
  table {
    border-collapse: collapse; 
    width: 100%; 
    margin-bottom: 30px;
  }
  table, th, td {
    border: 1px solid #ccc; 
    padding: 8px; 
    text-align: left;
  }
  th {
    background: #f0f0f0;
  }
  input, select {
    width: 100%;
  }
  .section-title {
    margin-top: 40px;
    font-size: 1.2em;
    font-weight: bold;
  }
  .subtotal, .total {
    font-weight: bold;
  }
  .notes {
    color: #555;
    font-size: 0.9em;
  }
</style>
<script>
function formatNumber(num) {
  return num.toLocaleString('en-US', {maximumFractionDigits:0});
}

function recalculate() {
  // Inputs
  const acres = parseFloat(document.getElementById('inputAcres').value) || 0;
  const costPerAcre = parseFloat(document.getElementById('costPerAcre').value) || 0;
  const usablePercent = parseFloat(document.getElementById('selectUsable').value) || 0;
  const lotsPerAcre = parseFloat(document.getElementById('inputLotsPerAcre').value) || 0;
  const entitledLotPrice = parseFloat(document.getElementById('entitledLotPrice').value) || 0;
  const developedLotPrice = parseFloat(document.getElementById('developedLotPrice').value) || 0;
  const tapFee = parseFloat(document.getElementById('tapFee').value) || 0;
  const difficulty = document.getElementById('gradingDifficulty').value;
  const primeRate = parseFloat(document.getElementById('primeRate').value) || 0;
  const carryingMonths = parseFloat(document.getElementById('carryingMonths').value) || 12;

  // Calculate total lots
  const totalLots = acres * usablePercent * lotsPerAcre;
  document.getElementById('totalLots').textContent = formatNumber(totalLots);

  // Land & Entitlement Costs
  const landPurchaseTotal = costPerAcre * acres;
  const engineering = 25000;
  const surveying = 20000;
  const adminLegal = 30000;
  const environmental = 5000;
  const geoTests = 5000;
  const landEntitlementSubtotal = landPurchaseTotal + engineering + surveying + adminLegal + environmental + geoTests;
  
  document.getElementById('landPurchaseCost').textContent = formatNumber(landPurchaseTotal);
  document.getElementById('landEntitlementSubtotal').textContent = formatNumber(landEntitlementSubtotal);

  // Site Preparation: Clearing & Grading and Erosion Control
  // Approx midpoints for grading (per acre):
  // Easy: ~13,000/acre
  // Normal: ~27,500/acre
  // Hilly: ~55,000/acre
  let gradingCostPerAcre = 0;
  if (difficulty === 'easy') {
    gradingCostPerAcre = 13000;
  } else if (difficulty === 'normal') {
    gradingCostPerAcre = 27500;
  } else {
    gradingCostPerAcre = 55000;
  }
  
  const clearingGrading = gradingCostPerAcre * acres;

  // Erosion Control & Soil Stabilization midpoints (per acre):
  // Easy: ~4,000/acre
  // Normal: ~5,000/acre
  // Hilly: ~9,500/acre
  let erosionCostPerAcre = 0;
  if (difficulty === 'easy') {
    erosionCostPerAcre = 4000;
  } else if (difficulty === 'normal') {
    erosionCostPerAcre = 5000;
  } else {
    erosionCostPerAcre = 9500;
  }
  const erosionControl = erosionCostPerAcre * acres;

  // Tap fees (per lot)
  const tapFeesTotal = tapFee * totalLots;

  const sitePrepSubtotal = clearingGrading + erosionControl + tapFeesTotal;
  document.getElementById('sitePrepSubtotal').textContent = formatNumber(sitePrepSubtotal);

  // Roadway & Infrastructure (same as before)
  const roadConstruction = 300 * 5280;
  const lightingSignage = 50000;
  const waterSewer = 5000 * totalLots;
  const stormwater = 2000 * totalLots;
  const electricGas = 2000 * totalLots;
  const roadInfraSubtotal = roadConstruction + lightingSignage + waterSewer + stormwater + electricGas;
  document.getElementById('roadInfraSubtotal').textContent = formatNumber(roadInfraSubtotal);

  // Lot Improvements
  // Landscaping: use leftover acres = acres*(1 - usablePercent)
  // $7,000 per acre of leftover land
  const leftoverAcres = acres * (1 - usablePercent);
  const landscaping = leftoverAcres * 7000;

  // Service laterals, grading/finishing per lot now included in site prep above?
  // The instructions didn't remove them, but we never had a separate per-lot grading in improvements.
  // We'll keep service laterals the same:
  const serviceLaterals = 1000 * totalLots;
  const lotGradingFinish = 500 * totalLots; // from original line items
  const commonAmenities = 50000;
  const lotImprovementsSubtotal = serviceLaterals + lotGradingFinish + commonAmenities + landscaping;
  document.getElementById('lotImprovementsSubtotal').textContent = formatNumber(lotImprovementsSubtotal);

  // Soft Costs (Remove Project Management fixed line)
  // We'll have Add’l Engineering/Consulting, Accounting/Legal, Insurance, Marketing/Sales only
  const addlEng = 25000;
  const accountingLegal = 10000;
  const insurance = 5000;
  const marketing = 15000;
  // Project management handled separately depending on scenario
  const softCostsBase = addlEng + accountingLegal + insurance + marketing;
  document.getElementById('softCostsSubtotal').textContent = formatNumber(softCostsBase);

  // Hard Costs (no project management yet)
  const hardCosts = landEntitlementSubtotal + sitePrepSubtotal + roadInfraSubtotal + lotImprovementsSubtotal;

  // Contingency & Reserves (10% of hard costs + 50,000 reserve)
  const contingency = hardCosts * 0.10;
  const ownerReserve = 50000;
  const contingencySubtotal = contingency + ownerReserve;
  document.getElementById('contingencySubtotal').textContent = formatNumber(contingencySubtotal);

  // At this point, we have a base cost: hardCosts + softCostsBase + contingencySubtotal
  const baseCostNoPM = hardCosts + softCostsBase + contingencySubtotal;

  // Financing:
  // Use primeRate+2% and carryingMonths to calculate financing cost
  // Financing = baseCostNoPM + (we must consider PM for developed scenario)
  // We'll first handle Entitled scenario (no PM, no dev)
  
  // ENTITLED SCENARIO:
  // Basis = totalLots * entitledLotPrice
  // Costs = landEntitlementSubtotal only (since we're not developing)
  // Profit = Basis - Costs
  const entitledBasis = totalLots * entitledLotPrice;
  const entitledCosts = landEntitlementSubtotal; 
  const entitledProfit = entitledBasis - entitledCosts;

  // DEVELOPED SCENARIO:
  // Basis = totalLots * developedLotPrice
  const developedBasis = totalLots * developedLotPrice;
  // Project Management = 5% of developedBasis
  const projectMgmt = developedBasis * 0.05;
  
  // Now recalculate Financing:
  // Financing cost = (baseCostNoPM + projectMgmt) * ( (primeRate+2%) * (carryingMonths/12) )
  const totalRate = (primeRate + 2) / 100.0; // convert to decimal
  const financingSubtotal = (baseCostNoPM + projectMgmt) * totalRate * (carryingMonths / 12);

  // Total Developed Costs:
  const developedCosts = baseCostNoPM + projectMgmt + financingSubtotal;
  const developedProfit = developedBasis - developedCosts;

  document.getElementById('financingSubtotal').textContent = formatNumber(financingSubtotal);

  // Total Project Cost (developed)
  document.getElementById('totalProjectCost').textContent = formatNumber(developedCosts);

  // Per-Lot Cost (developed)
  const perLotCost = totalLots > 0 ? developedCosts / totalLots : 0;
  document.getElementById('perLotCost').textContent = formatNumber(perLotCost);

  // Update Profit Calculations Table
  // Entitled scenario: show basis, costs, profit
  document.getElementById('entitledBasis').textContent = formatNumber(entitledBasis);
  document.getElementById('entitledCosts').textContent = formatNumber(entitledCosts);
  document.getElementById('entitledProfit').textContent = formatNumber(entitledProfit);

  // Developed scenario: basis, costs, profit
  document.getElementById('developedBasis').textContent = formatNumber(developedBasis);
  document.getElementById('developedCosts').textContent = formatNumber(developedCosts);
  document.getElementById('developedProfit').textContent = formatNumber(developedProfit);
}
</script>
</head>
<body onload="recalculate()">

<h1>Subdivision Development Proforma</h1>

<div class="section-title">Inputs</div>
<table>
  <tr>
    <th>Number of Acres</th>
    <td><input type="number" id="inputAcres" value="100" step="1" oninput="recalculate()" /></td>
    <td class="notes">Enter total acreage</td>
  </tr>
  <tr>
    <th>Cost per Acre</th>
    <td><input type="number" id="costPerAcre" value="7000" step="1" oninput="recalculate()" /></td>
    <td class="notes">Cost of land per acre</td>
  </tr>
  <tr>
    <th>% Usable Acreage</th>
    <td>
      <select id="selectUsable" onchange="recalculate()">
        <option value="0.50">50%</option>
        <option value="0.60">60%</option>
        <option value="0.70">70%</option>
        <option value="0.80">80%</option>
        <option value="0.90">90%</option>
        <option value="1.00" selected>100%</option>
      </select>
    </td>
    <td class="notes">Select from dropdown</td>
  </tr>
  <tr>
    <th>Lots per Acre</th>
    <td><input type="number" id="inputLotsPerAcre" value="4" step="0.1" oninput="recalculate()" /></td>
    <td class="notes">Assumed density</td>
  </tr>
  <tr>
    <th>Land Grading Difficulty</th>
    <td>
      <select id="gradingDifficulty" onchange="recalculate()">
        <option value="easy" selected>Easy</option>
        <option value="normal">Normal</option>
        <option value="hilly">Hilly</option>
      </select>
    </td>
    <td class="notes">Select site difficulty</td>
  </tr>
  <tr>
    <th>Entitled Lot Price to Builder</th>
    <td><input type="number" id="entitledLotPrice" value="8000" step="100" oninput="recalculate()" /></td>
    <td class="notes">Builder's price per entitled lot</td>
  </tr>
  <tr>
    <th>Developed Lot Price to Builder</th>
    <td><input type="number" id="developedLotPrice" value="35000" step="500" oninput="recalculate()" /></td>
    <td class="notes">Builder's price per developed lot</td>
  </tr>
  <tr>
    <th>Sewer & Water Tap Fee (per lot)</th>
    <td><input type="number" id="tapFee" value="2000" step="100" oninput="recalculate()" /></td>
    <td class="notes">Per-lot tap fees</td>
  </tr>
  <tr>
    <th>Prime Rate (%)</th>
    <td><input type="number" id="primeRate" value="5" step="0.1" oninput="recalculate()" /></td>
    <td class="notes">Prime interest rate for financing</td>
  </tr>
  <tr>
    <th>Carrying Period (months)</th>
    <td>
      <select id="carryingMonths" onchange="recalculate()">
        <option value="12" selected>12</option>
        <option value="18">18</option>
        <option value="24">24</option>
      </select>
    </td>
    <td class="notes">Select carrying period</td>
  </tr>
  <tr>
    <th>Total Lots</th>
    <td><span id="totalLots"></span></td>
    <td class="notes">Acres * %Usable * Lots/Acre</td>
  </tr>
</table>

<div class="section-title">Costs</div>

<table>
  <tr><th colspan="5">LAND & ENTITLEMENT</th></tr>
  <tr><td>Land Purchase</td><td colspan="3"><span id="landPurchaseCost"></span></td><td class="notes">Acres * Cost/Acre</td></tr>
  <tr><td>Engineering</td><td colspan="3">25,000</td><td></td></tr>
  <tr><td>Surveying</td><td colspan="3">20,000</td><td></td></tr>
  <tr><td>Admin & Legal (Permits/Zoning)</td><td colspan="3">30,000</td><td></td></tr>
  <tr><td>Environmental Studies</td><td colspan="3">5,000</td><td></td></tr>
  <tr><td>Soil/Geotech Tests</td><td colspan="3">5,000</td><td></td></tr>
  <tr class="subtotal"><td>Subtotal Land & Entitlement</td><td colspan="3"><span id="landEntitlementSubtotal"></span></td><td></td></tr>
</table>

<table>
  <tr><th colspan="5">SITE PREPARATION</th></tr>
  <tr><td>Clearing & Grading</td><td colspan="3">Calculated by difficulty & acres</td><td></td></tr>
  <tr><td>Erosion Control & Stabilization</td><td colspan="3">Calculated by difficulty & acres</td><td></td></tr>
  <tr><td>Sewer & Water Tap Fees (per lot)</td><td colspan="3">Tap Fee * Lots</td><td></td></tr>
  <tr class="subtotal"><td>Subtotal Site Prep</td><td colspan="3"><span id="sitePrepSubtotal"></span></td><td></td></tr>
</table>

<table>
  <tr><th colspan="5">ROADWAY & INFRASTRUCTURE</th></tr>
  <tr><td>Road Construction</td><td colspan="3">300/ft * 5280 ft</td><td></td></tr>
  <tr><td>Street Lighting/Signage</td><td colspan="3">50,000</td><td></td></tr>
  <tr><td>Water & Sewer Mains (per lot)</td><td colspan="3">5,000 * lots</td><td></td></tr>
  <tr><td>Stormwater Management (per lot)</td><td colspan="3">2,000 * lots</td><td></td></tr>
  <tr><td>Electric/Gas/Telecom (per lot)</td><td colspan="3">2,000 * lots</td><td></td></tr>
  <tr class="subtotal"><td>Subtotal Road & Infra</td><td colspan="3"><span id="roadInfraSubtotal"></span></td><td></td></tr>
</table>

<table>
  <tr><th colspan="5">LOT IMPROVEMENTS</th></tr>
  <tr><td>Service Laterals (per lot)</td><td colspan="3">1,000 * lots</td><td></td></tr>
  <tr><td>Lot Grading/Finishing (per lot)</td><td colspan="3">500 * lots</td><td></td></tr>
  <tr><td>Common Amenities (Lump Sum)</td><td colspan="3">50,000</td><td></td></tr>
  <tr><td>Landscaping ($7,000/acre leftover)</td><td colspan="3">Calculated on leftover acres</td><td></td></tr>
  <tr class="subtotal"><td>Subtotal Lot Improvements</td><td colspan="3"><span id="lotImprovementsSubtotal"></span></td><td></td></tr>
</table>

<table>
  <tr><th colspan="5">SOFT COSTS (No PM fee here)</th></tr>
  <tr><td>Add’l Engineering/Consulting</td><td colspan="3">25,000</td><td></td></tr>
  <tr><td>Accounting/Legal Fees</td><td colspan="3">10,000</td><td></td></tr>
  <tr><td>Insurance</td><td colspan="3">5,000</td><td></td></tr>
  <tr><td>Marketing/Sales</td><td colspan="3">15,000</td><td></td></tr>
  <tr class="subtotal"><td>Subtotal Soft Costs</td><td colspan="3"><span id="softCostsSubtotal"></span></td><td></td></tr>
</table>

<table>
  <tr><th colspan="5">CONTINGENCY & RESERVES</th></tr>
  <tr><td>Contingency (10% Hard Costs)</td><td colspan="3">Calculated</td><td></td></tr>
  <tr><td>Owner Reserve</td><td colspan="3">50,000</td><td></td></tr>
  <tr class="subtotal"><td>Subtotal Contingency</td><td colspan="3"><span id="contingencySubtotal"></span></td><td></td></tr>
</table>

<table>
  <tr><th colspan="5">FINANCING COSTS (Developed Scenario)</th></tr>
  <tr><td>Financing</td><td colspan="3">Based on (Prime+2%) & months</td><td></td></tr>
  <tr class="subtotal"><td>Subtotal Financing</td><td colspan="3"><span id="financingSubtotal"></span></td><td></td></tr>
</table>

<table>
  <tr><th colspan="5">TOTALS (Developed Scenario)</th></tr>
  <tr><td>Total Project Cost</td><td colspan="3"><span id="totalProjectCost"></span></td><td></td></tr>
  <tr><td>Per-Lot Cost</td><td colspan="3"><span id="perLotCost"></span></td><td></td></tr>
</table>

<div class="section-title">Profit Calculations</div>
<p class="notes">Showing Basis (Revenue), Costs, and Profits for Entitled and Developed Scenarios</p>

<table>
  <tr><th>Scenario</th><th>Basis</th><th>Costs</th><th>Profit</th></tr>
  <tr>
    <td>Sell Entitled Land</td>
    <td><span id="entitledBasis"></span></td>
    <td><span id="entitledCosts"></span></td>
    <td><span id="entitledProfit"></span></td>
  </tr>
  <tr>
    <td>Sell Fully Developed Lots</td>
    <td><span id="developedBasis"></span></td>
    <td><span id="developedCosts"></span></td>
    <td><span id="developedProfit"></span></td>
  </tr>
</table>

<p class="notes">Adjust values, formulas, and references as needed. This is a simplified approximation.</p>

</body>
</html>
